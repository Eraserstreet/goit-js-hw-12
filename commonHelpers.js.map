{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const imageTemplate = images => {\n  return images\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n           <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n             <img\n               class=\"gallery-image\"\n               width=\"1280\"\n               height=\"152\"\n               src=\"${image.webformatURL}\"\n               data-source=\"${image.largeImageURL}\"\n               alt=\"${image.tags}\"\n             />\n             </a>\n             <ul class=\"gallery-description\">\n             <li><h3>Likes</h3><p>${image.likes}</p>\n             </li>\n             <li><h3>Views</h3><p>${image.views}</p>\n               </li>\n               <li><h3>Comments</h3><p>${image.comments}</p>\n                 </li>\n                 <li><h3>Downloads</h3><p>${image.downloads}</p>\n                   </li>\n             </ul>\n           </li>`\n    )\n    .join('');\n};\n","import axios from 'axios';\n\nexport async function getImage(inputValue, page) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const params = new URLSearchParams({\n    key: '42962590-b9bb006e5b1e7f6cfce132ccb',\n    q: inputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  });\n  const url = `${BASE_URL}${END_POINT}?${params}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error('Error fetching images');\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImage } from './js/pixabay-api';\nimport { imageTemplate } from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\nconst imgGallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet searchQuery = '';\nlet currentPage = 1;\nlet lightboxInstance = null;\n\nconst showLoader = () => {\n  loader.style.display = 'block';\n};\n\nconst hideLoader = () => {\n  loader.style.display = 'none';\n};\n\nconst showErrorToast = () => {\n  iziToast.error({\n    maxWidth: '432px',\n    height: '48px',\n    color: 'red',\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n};\n\nconst displayImages = data => {\n  const markup = imageTemplate(data.hits);\n  imgGallery.innerHTML += markup;\n\n  if (!lightboxInstance) {\n    lightboxInstance = new SimpleLightbox('.gallery a', {});\n  } else {\n    lightboxInstance.refresh();\n  }\n};\n\nconst handleFormSubmit = async event => {\n  event.preventDefault();\n  imgGallery.innerHTML = '';\n  currentPage = 1;\n\n  searchQuery = event.currentTarget.elements.image.value.trim();\n\n  if (!searchQuery) {\n    iziToast.error({\n      color: 'yellow',\n      message: 'Please fill in the field for search query.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader();\n  try {\n    const data = await getImage(searchQuery, currentPage);\n    if (data.hits.length === 0) {\n      showErrorToast();\n      loadMoreBtn.style.display = 'none';\n      return;\n    }\n\n    displayImages(data);\n\n    if (data.totalHits > 15) {\n      loadMoreBtn.style.display = 'block';\n    } else {\n      loadMoreBtn.style.display = 'none';\n    }\n  } catch (error) {\n    showErrorToast();\n    loadMoreBtn.style.display = 'none';\n  } finally {\n    hideLoader();\n    formEl.reset();\n  }\n};\n\nconst handleLoadMore = async () => {\n  currentPage += 1;\n  showLoader();\n  try {\n    const data = await getImage(searchQuery, currentPage);\n    displayImages(data);\n    if (data.totalHits <= currentPage * 15) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        color: 'yellow',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n    smoothScroll();\n  } catch (error) {\n    showErrorToast();\n  } finally {\n    hideLoader();\n  }\n};\n\nformEl.addEventListener('submit', handleFormSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nfunction smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  const cardHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["imageTemplate","images","image","getImage","inputValue","page","BASE_URL","END_POINT","params","url","axios","formEl","imgGallery","loadMoreBtn","loader","searchQuery","currentPage","lightboxInstance","showLoader","hideLoader","showErrorToast","iziToast","displayImages","data","markup","SimpleLightbox","handleFormSubmit","event","handleLoadMore","smoothScroll","cardHeight"],"mappings":"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"}